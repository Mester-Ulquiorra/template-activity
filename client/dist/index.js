import{a as z,b as A} from"./bundle.js";var j={CLIENT_ID:"776457447887470593"};async function O(){await h.ready(),console.log("Discord SDK is ready!");const{code:v}=await h.commands.authorize({client_id:F,response_type:"code",state:"",prompt:"none",scope:["identify","guilds"]}),H=await fetch("/api/auth/get-activity-token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:v})}),{access_token:f}=await H.json();return console.log(f),h.commands.authenticate({access_token:f})}var G=function(v,H){const f=document.createElement("p");f.innerText=`${H}: ${v}`,document.body.appendChild(f)},q=document.getElementById("message"),J=document.getElementById("send"),T=document.getElementById("text"),F=j.CLIENT_ID,h=new z(F),w=await O(),L=new A.Client(`wss://${location.host}/mp`),N=await L.joinOrCreate("base_room").then((v)=>{return v.onMessage("message",(H)=>{G(H.message,H.name)}),setInterval(()=>{v.send("heartbeat",0)},5000),v});J.addEventListener("click",()=>{const v=q.value;N.send("message",{message:v,name:w.user.username}),G(v,w.user.username),q.value=""});
